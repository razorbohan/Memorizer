function initiateJsGrid(t,i,n){$("#jsGrid").jsGrid({width:"100%",height:"400px",editing:!0,sorting:!0,paging:!0,noDataContent:"Not found",autoload:!0,controller:{loadData:function(e){return asyncGet(n+"Find/"+t+"/"+i)},insertItem:function(e){asyncPost(n+"Add",e)},updateItem:function(e){asyncPost(n+"Update",e)},deleteItem:function(e){asyncPost(n+"Delete/"+e.id)}},loadIndication:!0,loadIndicationDelay:500,loadMessage:"Loading memos...",loadShading:!0,updateOnResize:!0,fields:[{name:"id",type:"number",title:"ID",align:"center",editing:!1,width:50},{name:"question",type:"text",title:"Question",align:"center",width:150},{name:"answer",type:"text",title:"Answer",align:"center",width:200},{name:"repeatDate",type:"date",formatter:"date",title:"Repeat date",align:"center",width:90},{name:"postponeLevel",type:"select",title:"LVL",align:"center",width:40,items:[{Lvl:0},{Lvl:1},{Lvl:2},{Lvl:6},{Lvl:15},{Lvl:40},{Lvl:100},{Lvl:250},{Lvl:625}],valueField:"Lvl",textField:"Lvl"},{name:"scores",type:"number",title:"Scores",align:"center",width:65},{type:"control",width:52}]})}function formatDate(e){var t=new Date(e),i=""+(t.getMonth()+1),n=""+t.getDate(),a=t.getFullYear();return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),[n,i,a].join(".")}function initiate(t,i){$("#showAnswer").focus(),$("#showAnswer").click(function(){$("#answerArea").val(i.answer),$("#answerForm").css("visibility","visible"),$("input[value=Cool]").focus()}),$("#questionArea,#answerArea").focus(function(){$(".update-group").css("visibility","visible")}),$("#questionArea,#answerArea").blur(function(){0===$(".update-group:hover").length&&$(".update-group").css("visibility","hidden")}),$("#replaceMemos").click(function(){var e=$("#questionArea").val(),t=$("#answerArea").val();$("#questionArea").val(t),$("#answerArea").val(e)}),$("#switchModeButton").click(function(e){window.location=t.concat($(this).text().includes("Learn")?"Learn":"Repeat"),e.preventDefault()}),$("#updateButton").click(function(e){i.question=$("#questionArea").val(),i.answer=$("#answerArea").val(),asyncPost(t+"Update",i),$(".update-group").css("visibility","hidden"),e.preventDefault()}),$("#deleteButton").click(function(e){asyncPost(t+"Delete/"+i.id,null,function(e){sessionStorage.setItem("alert",e),location.reload(!0)}),e.preventDefault()}),$("#answerForm").submit(function(){$(".lds-ellipsis").css("visibility","visible")}),initiateModals(t)}function showMessage(e){$("#message").text(e);var t=e.startsWith("Error")?"alert-danger":"alert-success";$(".alert").addClass(t),$(".alert").removeClass("d-none")}function asyncPost(e,t,i){return $(".lds-ellipsis").css("visibility","visible"),$.ajax({url:e,type:"POST",data:t,complete:function(){$(".lds-ellipsis").css("visibility","hidden")},success:function(e){null!=i&&i(e),showMessage(e)}})}function asyncGet(e,t){return $.ajax({url:e,type:"GET",success:function(e){null!=t&&t(e)}})}function finish(e){$(".summary").css("visibility","hidden"),$("#finishMessage").text(e),$("#finishModal").modal()}function initiateModals(e){$(window).click(function(e){$(".navbar-collapse").hasClass("show")&&!$(e.target).hasClass("navbar-toggler")&&$("button.navbar-toggler").click()}),$("#addModal").on("hidden.bs.modal",function(){$(this).find(".modal-body > textarea").val("")}),$("#findNewMemo").click(function(){initiateJsGrid($("#findKey").val(),$("#findValue").val(),e),$("#findModal").find(".modal-dialog").css("max-width","90%")}),$("#submitNewMemo").click(function(){asyncPost(e+"Add","question="+$("#addQuestionArea").val()+"&answer="+$("#addAnswerArea").val())}),$("#findModal").on("hidden.bs.modal",function(){$("#findKey").val(""),0<$("#jsGrid").children().length&&$("#jsGrid").jsGrid("destroy"),$(this).find(".modal-dialog").css("max-width","")})}$(window).on("load",function(){var e=function(e){jsGrid.Field.call(this,e)};e.prototype=new jsGrid.Field({sorter:function(e,t){return new Date(e)-new Date(t)},itemTemplate:function(e){return formatDate(new Date(e))},filterTemplate:function(){var e=new Date;return this._fromPicker=$("<input>").datepicker({defaultDate:e.setFullYear(e.getFullYear()-1)}),this._toPicker=$("<input>").datepicker({defaultDate:e.setFullYear(e.getFullYear()+1)}),$("<div>").append(this._fromPicker).append(this._toPicker)},insertTemplate:function(e){return this._insertPicker=$("<input>").datepicker({defaultDate:new Date})},editTemplate:function(e){return this._editPicker=$("<input>").datepicker({dateFormat:"dd.mm.yy"}).datepicker("setDate",new Date(e))},insertValue:function(){var e=this._insertPicker.datepicker("getDate");return null!==e&&"undefined"!==e?formatDate(this._insertPicker.datepicker("getDate")):null},editValue:function(){var e=this._editPicker.datepicker("getDate");return null!==e&&"undefined"!==e?formatDate(this._editPicker.datepicker("getDate")):null},filterValue:function(){return{from:this._fromPicker.datepicker("getDate"),to:this._toPicker.datepicker("getDate")}}}),jsGrid.fields.date=e}),$(document).ready(function(){window.history.replaceState(null,null,window.location.href),sessionStorage.hasOwnProperty("alert")&&(showMessage(sessionStorage.getItem("alert")),sessionStorage.removeItem("alert"))});